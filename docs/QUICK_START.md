# ğŸš€ Quick Start Guide - IoT Air Quality Monitoring System

## ğŸ“‹ Prerequisites

- Node.js installed
- Expo Go app on your phone ([Android](https://play.google.com/store/apps/details?id=host.exp.exponent) | [iOS](https://apps.apple.com/app/expo-go/id982107779))
- Phone and computer on same WiFi network

---

## âš¡ Super Quick Start (3 Steps)

### 1. Start Backend Server
```bash
cd /home/mylappy/Desktop/cnproject/project
npm run start:api
```

Wait for this message:
```
âœ… Server ready! Waiting for NodeMCU simulator or mobile app...
```

### 2. Run Setup Script (First Time Only)
**In a NEW terminal:**
```bash
npm run setup
```

This will create:
- Demo user account
- Demo channel
- API keys for NodeMCU

**Save the credentials shown!** You'll need them to login.

### 3. Start Mobile App
**In another NEW terminal:**
```bash
npm run phone
```

Scan the QR code with Expo Go app on your phone.

**Login with the credentials from step 2.**

---

## ğŸ¯ Full Setup (With NodeMCU Simulator)

### Terminal 1: Backend Server
```bash
npm run start:api
```

### Terminal 2: Setup (One-time)
```bash
npm run setup
```

**Copy the CHANNEL_ID and WRITE_API_KEY shown!**

### Terminal 3: NodeMCU Simulator
```bash
# Replace xxx and yyy with your actual values from setup
CHANNEL_ID=xxx WRITE_API_KEY=yyy npm run nodemcu
```

You should see:
```
ğŸ“¡ Reading sensors...
  MQ-135 (CO2): 485 ppm
  DHT11 (Temp): 24.5Â°C
  DHT11 (Hum):  52.3%
â˜ï¸ Sending data to cloud...
âœ… Data sent successfully!
```

### Terminal 4: Mobile App
```bash
npm run phone
```

---

## ğŸ“± Using the Mobile App

### First Time:
1. **Scan QR code** in Expo Go
2. **Register** a new account or **Login** with demo credentials
3. **Select a channel** from the dashboard
4. **View real-time data!**

### Features:
- **Pull down** to refresh manually
- **Auto-updates** every 15 seconds
- **Tap "+" button** to create new channel
- **Logout** button in top right

---

## ğŸ”§ Configuration Files

### .env (Mobile App)
```
EXPO_PUBLIC_API_BASE=http://192.168.1.12:3000
```

### .env.simulator (Auto-generated by setup script)
```
CHANNEL_ID=channel_xxx
WRITE_API_KEY=abc123...
DEMO_EMAIL=demo@airquality.com
DEMO_PASSWORD=demo123
```

---

## ğŸ“ Understanding the System

### What's Happening:

1. **NodeMCU Simulator** (simulator/nodemcu.js)
   - Simulates ESP8266 with MQ-135 and DHT11 sensors
   - Reads CO2, temperature, humidity every 10 seconds
   - Sends data to backend server with API key authentication

2. **Backend Server** (backend/server.js)
   - Receives sensor data
   - Calculates AQI from sensor readings
   - Stores data in JSON database
   - Serves data to mobile app via REST API

3. **Mobile App** (React Native)
   - User logs in
   - Selects a channel
   - Displays real-time air quality data
   - Shows AQI, CO2, temperature, humidity
   - Updates automatically every 15 seconds

---

## ğŸ“Š Demo User Credentials

Default credentials created by setup script:
```
Email: demo@airquality.com
Password: demo123
```

---

## ğŸ› Troubleshooting

### Backend won't start?
```bash
# Check if port 3000 is in use
lsof -i :3000
# Kill process if needed
kill -9 <PID>
```

### NodeMCU simulator error "Missing Channel ID"?
```bash
# Make sure you ran setup first
npm run setup

# Use the credentials shown
CHANNEL_ID=xxx WRITE_API_KEY=yyy npm run nodemcu
```

### Mobile app can't connect?
1. Check both devices on same WiFi
2. Update IP in `.env` file
   ```bash
   # Find your IP
   hostname -I
   
   # Update .env
   EXPO_PUBLIC_API_BASE=http://YOUR_IP:3000
   ```
3. Check firewall allows port 3000
   ```bash
   sudo ufw allow 3000
   ```

### App shows "No data"?
- Make sure NodeMCU simulator is running
- Check backend terminal for incoming data
- Pull down to refresh in app

---

## ğŸ¨ Creating Additional Channels

### In Mobile App:
1. Login
2. Tap **"+ Add Channel"** button
3. Enter channel name and description
4. **Save the API keys shown!**
5. Use those keys to start another NodeMCU simulator

### Example - Multiple Rooms:
```bash
# Terminal 1: Living Room
CHANNEL_ID=channel_1 WRITE_API_KEY=key_1 npm run nodemcu

# Terminal 2: Bedroom
CHANNEL_ID=channel_2 WRITE_API_KEY=key_2 npm run nodemcu

# Terminal 3: Kitchen
CHANNEL_ID=channel_3 WRITE_API_KEY=key_3 npm run nodemcu
```

---

## ğŸ“¦ NPM Scripts Reference

| Command | Description |
|---------|-------------|
| `npm run start:api` | Start backend server |
| `npm run setup` | Create demo user & channel (one-time) |
| `npm run nodemcu` | Start NodeMCU simulator (needs env vars) |
| `npm run phone` | Start mobile app with tunnel mode |
| `npm start` | Start mobile app (local network only) |

---

## ğŸ¯ Next Steps

1. âœ… **Test the basic flow**: Backend â†’ Simulator â†’ Mobile App
2. ğŸ“š **Read architecture docs**: `docs/ARCHITECTURE.md`
3. ğŸ”§ **Create more channels**: Test multi-channel support
4. ğŸ¨ **Customize the app**: Modify screens in `app/` folder
5. ğŸ”Œ **Connect real hardware**: Replace simulator with actual ESP8266 + sensors

---

## ğŸ“ Support

For issues or questions:
1. Check `docs/ARCHITECTURE.md` for detailed documentation
2. Review terminal output for error messages
3. Verify all steps completed in order

---

**Status**: âœ… Ready to run!  
**Last Updated**: November 22, 2025
